"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1365,9043,1534],{1365:function(i,t,n){n.r(t),n.d(t,{default:function(){return u}});var e=n(8130),o=n.n(e),r=n(5137),a=n(9043),s=n(1534);function d(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function h(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}var u=function i(t,n,e){arguments.length>3&&void 0!==arguments[3]||(o().rangeFloor(0,n.gridSize-1),o().rangeFloor(0,n.gridSize-1));var u=this;d(this,i),h(this,"runNumber",0),h(this,"lookAroundSize",2),h(this,"buildingFound",!1),h(this,"setPos",(function(i){u.x=i[0],u.y=i[1]})),h(this,"get0tile",(function(){var i=!1;do{var t=o().rangeFloor(0,u.env.gridSize-1),n=o().rangeFloor(0,u.env.gridSize-1);u.habitat.getHabitat(t,n)!==a.woodlandEdge&&u.habitat.getHabitat(t,n)!==a.woodland&&u.habitat.getHabitat(t,n)!==a.buildings&&(u.setPos([t,n]),i=!0)}while(!0!==i)})),h(this,"findTileNearHouse",(function(){var i=!1;do{var t=o().rangeFloor(0,u.env.gridSize-1),n=o().rangeFloor(0,u.env.gridSize-1);u.searchForBuildingProximity(t,n)&&(u.setPos([t,n]),i=!0)}while(!0!==i)})),h(this,"getInfo",(function(){return{id:u.id,x:u.x,y:u.y,width:u.size,height:u.size,species:u.species}})),h(this,"tick",(function(i){u.move(),u.checkAndEatBat(i),u.draw()})),h(this,"checkAndEatBat",(function(i){for(var t=0;t<i.length;t++)u.x===i[t].getInfo().x&&u.y===i[t].getInfo().y&&(0,s.getRandomInt)(0,10)>5&&i[t].die()})),h(this,"move",(function(){var i=!1,t=0,n=0;do{t=u.x+o().pick([-u.env.moveDistance,0,u.env.moveDistance]),n=u.y+o().pick([-u.env.moveDistance,0,u.env.moveDistance]),u.avoidEdges(t,n)&&u.avoidBadHabitats(t,n)&&u.searchForBuildingProximity(t,n)&&(u.buildingFound=!0,u.x=t,u.y=n,i=!0)}while(!0!==i)})),h(this,"avoidBadHabitats",(function(i,t){return u.habitat.getHabitat(i,t)!==a.buildings&&u.habitat.getHabitat(i,t)!==a.woodland})),h(this,"avoidEdges",(function(i,t){var n=i>0&&i<u.env.gridSize,e=t>0&&t<u.env.gridSize;return n&&e})),h(this,"searchForBuildingProximity",(function(i,t){for(var n=t-u.lookAroundSize;n<t+u.lookAroundSize+1;n++)for(var e=i-u.lookAroundSize;e<i+u.lookAroundSize+1;e++)if(u.habitat.getHabitat(e,n)===a.buildings)return!0;return!1})),h(this,"draw",(function(){u.ctx.beginPath();var i=u.x/(u.env.gridSize-1),t=u.y/(u.env.gridSize-1);u.ctx.arc(u.env.marginX+(0,r.lerp)(0,u.env.height,i)-u.size/2,(0,r.lerp)(0,u.env.height,t),u.size,0,2*Math.PI),u.ctx.fillStyle="#fff",u.ctx.fill()})),this.ctx=t,this.env=n,this.size=2,this.width=this.size,this.height=this.size,this.habitat=e,this.id=Math.random(),this.timestamp=0,this.lastTimestamp=0,this.findTileNearHouse()}},9043:function(i,t,n){n.r(t),n.d(t,{buildings:function(){return r},woodland:function(){return e},woodlandEdge:function(){return o}});var e=1,o=2,r=3},1534:function(i,t,n){n.r(t),n.d(t,{drawGradientBackground:function(){return r},getRandomInt:function(){return o},test:function(){return e}});var e=function(){console.log("test")},o=function(i,t){return i=Math.ceil(i),t=Math.floor(t),Math.floor(Math.random()*(t-i+1))+i},r=function(i,t,n){var e=i.color(t),o=i.color(n);e.setAlpha(20),o.setAlpha(20);for(var r=0;r<i.width+1;r++){var a=i.map(r,0,i.width,0,1),s=i.lerpColor(e,o,a);i.stroke(s),i.line(r,-1,r,i.height),i.pop()}}}}]);